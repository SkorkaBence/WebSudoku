var m,p="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},t;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var v;a:{var aa={$:!0},w={};try{w.__proto__=aa;v=w.$;break a}catch(a){}v=!1}t=v?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var x=t;
function y(a,b){a.prototype=p(b.prototype);a.prototype.constructor=a;if(x)x(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ja=b.prototype}function z(){window.localStorage||window.alert("Your browser doesn't support localStorage")}z.prototype.get=function(a){return localStorage.getItem(a)};z.prototype.set=function(a,b){localStorage.setItem(a,b)};z.prototype.remove=function(a){localStorage.removeItem(a)};
window.Database=z;var A=null,B=!1,C=null;window.addEventListener("load",function(){console.log("Initilaizing...");window.fetch||alert("Ez a f\u00f6ng\u00e9sz\u0151 nem t\u00e1mogat FETCH -et!");CSS.supports("display","grid")||alert("Ez a f\u00f6ng\u00e9sz\u0151 nem t\u00e1mogat CSS GRID -et!");C=new Database;D();var a=ba();!1!==a?E(new F(a)):E(new G);document.addEventListener("mousemove",function(a){A.X(a)})});window.addEventListener("resize",D);
function D(){var a=document.querySelector("canvas");a.width=a.offsetWidth;a.height=a.offsetHeight;B||"object"!=typeof A||null==A||"function"!=typeof A.H||A.H()}function H(){if(!B){if("object"==typeof A&&null!=A&&"function"==typeof A.i){if(!A.Z())return;A.i()}requestAnimationFrame(function(){H()})}}function E(a){B=!0;"object"==typeof A&&null!=A&&"function"==typeof A.w&&A.w();A=a;"object"==typeof A&&null!=A&&"function"==typeof A.load&&A.load();B=!1;H()}
function ba(){var a=C.get("gamestate");if("undefined"!=typeof a&&null!=a){var b=new I;b.D(a);return b}return!1}function J(){this.g=document.querySelector("canvas");this.j=this.g.getContext("2d");this.s=document.querySelector("main");this.U=this.Y=this.G=0}m=J.prototype;m.i=function(){console.error("You need to override the render function")};function K(a){a.j.fillStyle="red";a.j.font="20px 'Roboto Mono'";a.j.fillText(a.Y+" FPS",0,20);a.G++;var b=Date.now();1E3<=b-a.U&&(a.Y=a.G,a.G=0,a.U=b)}m.Z=function(){return!0};
m.X=function(){};m.load=function(){};m.w=function(){};m.H=function(){};
function L(a,b){for(var c=a.size+1,d,e,k=0,n=[],f=0;f<a.size;++f)for(var g=0;g<a.size;++g)if(!N(a,f,g)){k++;var h=a,l=f,r=g;if(O(h,l,r)){var q=P(h.size,!0);for(var u=0;u<h.size;++u)q[h.a[l][u].value-1]=!1,q[h.a[u][r].value-1]=!1;if(h.o)for(l=Math.floor(l/h.c)*h.c,r=Math.floor(r/h.c)*h.c,u=0;u<h.c;++u)for(var M=0;M<h.c;++M)q[h.a[l+u][r+M].value-1]=!1;h=[];for(l=0;l<q.length;++l)q[l]&&h.push(l+1);q=h}else q=[];q.length<c&&(c=q.length,d=f,e=g,n=q)}if(0<k){c=[];for(k=0;k<n.length;++k){do f=Math.floor(Math.random()*
n.length);while(c.includes(f));c.push(f)}for(f=k=0;f<c.length;++f)if(Q(a,d,e,n[c[f]]),g=L(a,b),g.result){k+=g.v;var ca=g.L;if(!0!==b||2<=k)return g.v=k,Q(a,d,e,0),g}Q(a,d,e,0);return{result:0<k,L:ca,v:k}}return"correct"==R(a)?{result:!0,L:a.clone(),v:1}:{result:!1,v:0}}function S(){this.value=0;this.fixed=!1}S.prototype.clone=function(){var a=new S;a.value=this.value;a.fixed=this.fixed;return a};S.prototype.K=function(){return JSON.stringify({value:this.value,fixed:this.fixed})};
S.prototype.D=function(a){a=JSON.parse(a);this.value=a.value;this.fixed=a.fixed};function I(a){if("number"==typeof a){if(2==a||3==a)this.o=!1;else{var b=Math.round(Math.sqrt(a));a==b*b?(this.o=!0,this.c=Math.round(Math.sqrt(a))):console.error("Invalid size: ",a)}this.size=a;this.a=[];for(b=0;b<a;++b){this.a[b]=[];for(var c=0;c<a;++c)this.a[b][c]=new S}}}I.prototype.clone=function(){for(var a=new I(this.size),b=0;b<this.size;++b)for(var c=0;c<this.size;++c)a.a[b][c]=this.a[b][c].clone();return a};
I.prototype.K=function(){for(var a=[],b=0;b<this.size;++b){a[b]=[];for(var c=0;c<this.size;++c)a[b][c]=this.a[b][c].K()}return JSON.stringify({size:this.size,o:this.o,c:this.c,a:a})};I.prototype.D=function(a){a=JSON.parse(a);this.size=a.size;this.o=a.o;this.c=a.c;this.a=[];for(var b=0;b<this.size;++b){this.a[b]=[];for(var c=0;c<this.size;++c){var d=new S;d.D(a.a[b][c]);this.a[b][c]=d}}};
function O(a,b,c){"number"==typeof b&&"number"==typeof c||console.error("Numbers required");return 0<=b&&0<=c&&b<a.size&&c<a.size}function Q(a,b,c,d){O(a,b,c)&&0<=d&&d<=a.size&&(a.a[b][c].value=d)}function N(a,b,c){return O(a,b,c)?0<a.a[b][c].value:!1}I.prototype.A=function(a,b){return O(this,a,b)?this.a[a][b].value:!1};function da(a,b,c){return O(a,b,c)?a.a[b][c].fixed:!1}
function R(a){for(var b=0;b<a.size;++b)for(var c=0;c<a.size;++c)if(0>=a.a[b][c].value)return"not_solved";for(b=0;b<a.size;++b){c=P(a.size,!1);for(var d=P(a.size,!1),e=0;e<a.size;++e){if(c[a.a[b][e].value-1]||d[a.a[e][b].value-1])return"mistakes";c[a.a[b][e].value-1]=!0;d[a.a[e][b].value-1]=!0}}if(a.o)for(b=0;b<a.c;++b)for(c=0;c<a.c;++c)for(d=P(a.size,!1),e=b*a.c;e<(b+1)*a.c;++e)for(var k=c*a.c;k<(c+1)*a.c;++k){if(d[a.a[e][k].value-1])return"mistakes";d[a.a[e][k].value-1]=!0}return"correct"}
function ea(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function P(a,b){for(var c=[],d=0;d<a;++d)c[d]=b;return c}function T(a){for(var b=a.length,c,d;0!==b;)d=Math.floor(Math.random()*b),--b,c=a[b],a[b]=a[d],a[d]=c;return a}function U(a,b){return Math.random()*(b-a)+a}function V(a,b){this.type=a;this.background=this.text="";this.J=this.I=-1;"color"==a?this.background=b:"number"==a&&(this.text=b)}
function W(a,b){"color"==a.type?b.style.backgroundColor=a.background:"number"==a.type&&(b.innerHTML=a.text)}
function F(a){J.call(this);this.b=a;this.O="01_gettyimages-450207051_super_resized.jpg 02_gettyimages-544346474_super_resized.jpg 03_gettyimages-642010642_high_resized.jpg 04_gettyimages-536057853_high_resized.jpg 05_gettyimages-170349835_high_resized.jpg 06_gettyimages-74076688_super_resized.jpg 07_gettyimages-483771218_super_resized.jpg 08_gettyimages-512735064_super_resized.jpg 09_gettyimages-510014070_super_resized.jpg 10_gettyimages-452517269_high_resized.jpg 11_gettyimages-490639794_super_resized.jpg 12_gettyimages-534484823_super_resized.jpg 13_gettyimages-861470990_super_resized.jpg 14_gettyimages-635731456_high_resized.jpg 15_gettyimages-492003884_high_resized.jpg 16_gettyimages-621545726_high_resized.jpg 17_gettyimages-92415747_high_resized.jpg 18_gettyimages-672313436_super_resized.jpg".split(" ");this.B=
[];a=T(["red","blue","green","yellow"]);if(this.b.size<=a.length)for(var b=0;b<this.b.size;b++)this.B.push(new V("color",a[b%a.length]));else for(a=0;a<this.b.size;a++)this.B.push(new V("number",a+1))}y(F,J);m=F.prototype;
m.load=function(){this.s.innerHTML='\n            <div class="fullscreen background" id="sudokubg"></div>\n            <div class="gamearea noselect">\n                <div class="exitbtn">\n                    <i class="material-icons">exit_to_app</i>\n                </div>\n                <div class="gamebody">\n                    <table id="gametable"></table>\n                </div>\n                <div class="celloptions"></div>\n            </div>\n        ';document.querySelector(".exitbtn").addEventListener("click",
function(){C.remove("gamestate");E(new G)});document.querySelector("#sudokubg").style.backgroundImage="url('img/backgrounds/"+this.O[Math.floor(Math.random()*this.O.length)]+"')";this.i()};m.w=function(){this.s.innerHTML=""};m.H=function(){this.i()};m.Z=function(){return!1};
m.i=function(){var a=this,b=document.querySelector("#gametable"),c=document.querySelector(".celloptions");c.innerHTML="";var d=Math.min((b.parentNode.clientWidth-3)/this.b.size,(b.parentNode.clientHeight-3)/this.b.size),e=Math.max(Math.min(d*this.b.size/(this.b.size+1)-10,c.clientHeight-20),40);b.innerHTML="";for(var k=0;k<this.b.size;++k){for(var n=document.createElement("tr"),f=0;f<this.b.size;++f){var g=this.A(f,k);g.style.width=d+"px";g.style.height=d+"px";g.style.fontSize=.6*d+"px";n.appendChild(g)}b.appendChild(n)}for(b=
0;b<=this.b.size;b++)d=document.createElement("div"),d.className="option",d.style.width=e+"px",d.style.height=e+"px",d.style.fontSize=.6*e+"px",0<b?(W(this.B[b-1],d),k=document.createElement("span"),k.innerHTML=d.innerHTML,d.innerHTML="",d.appendChild(k)):d.innerHTML="<span class='fa fa-eraser'></span>",d.addEventListener("click",function(b){return function(){Q(a.b,a.I,a.J,b);a.i();var c=R(a.b);"not_solved"!=c&&"mistakes"!=c&&"correct"==c&&(C.remove("gamestate"),E(new X))}}(b)),c.appendChild(d);C.set("gamestate",
this.b.K())};
m.A=function(a,b){var c=this,d=document.createElement("td"),e=this.b.A(a,b),k=da(this.b,a,b);d.classList.add("cell-"+a+"-"+b);k?d.classList.add("fixed-cell"):(d.classList.add("changeable-cell"),d.addEventListener("click",function(){c.I=a;c.J=b;c.i()}));0>=e?d.classList.add("unset-cell"):(d.classList.add("set-cell"),d.classList.add("cell-value-"+e),W(this.B[e-1],d));this.b.o&&(e=this.b.c,0==a%e&&d.classList.add("section-border-left"),0==b%e&&d.classList.add("section-border-top"),a%e==e-1&&d.classList.add("section-border-right"),
b%e==e-1&&d.classList.add("section-border-bottom"));a==this.I&&b==this.J&&d.classList.add("selected-cell");return d};function G(){J.call(this);this.W=this.V=0}y(G,J);
G.prototype.load=function(){this.s.innerHTML='\n        <div class="vertical-center">\n            <div class="horizontal-center menu noselect">\n                <h1>Sudoku</h1>\n                <div class="size-selection">\n                    <h2>J\u00e1t\u00e9kt\u00e9r m\u00e9rete</h2>\n\n                    <button class="button sizebtn" data-sudoku-size="3">\n                        3x3\n                        <span class="material-icons menuicon">navigate_next</span>\n                    </button>\n                    <button class="button sizebtn" data-sudoku-size="4">\n                        4x4\n                        <span class="material-icons menuicon">navigate_next</span>\n                    </button>\n                    <button class="button sizebtn" data-sudoku-size="9">\n                        9x9 (Norm\u00e1l Sudoku)\n                        <span class="material-icons menuicon">navigate_next</span>\n                    </button>\n                    \x3c!--\n                    <button class="button sizebtn" data-sudoku-size="16">\n                        16x16 (EXTREMEEEEE)\n                        <span class="material-icons menuicon">navigate_next</span>\n                    </button>\n                    --\x3e\n                    <a href="https://benceskorka.com/" target="_blank" class="button">\n                        K\u00e9sz\u00edt\u0151\n                    </a>\n                </div>\n                <div class="difficulty-selection">\n                    <h2>J\u00e1t\u00e9k neh\u00e9zs\u00e9ge</h2>\n                    <button class="button diffbtn" data-sudoku-diff="easy">K\u00f6nny\u0171</button>\n                    <button class="button diffbtn" data-sudoku-diff="difficult">Neh\u00e9z</button>\n                    <button class="button diffbtn" data-sudoku-diff="max">Nagyon nagyon neh\u00e9z</button>\n                </div>\n            </div>\n        </div>\n        ';document.querySelector(".size-selection").style.display=
"";document.querySelector(".difficulty-selection").style.display="none";for(var a=this,b=document.querySelectorAll(".sizebtn"),c=0;c<b.length;c++)b[c].addEventListener("click",function(b){b.target.hasAttribute("data-sudoku-size")&&(a.h=Number(b.target.getAttribute("data-sudoku-size")),document.querySelector(".size-selection").style.display="none",document.querySelector(".difficulty-selection").style.display="")},!1);b=document.querySelectorAll(".diffbtn");for(c=0;c<b.length;c++)b[c].addEventListener("click",
function(b){if(b.target.hasAttribute("data-sudoku-diff")){b=b.target.getAttribute("data-sudoku-diff");var c=0;3==a.h&&"easy"==b?c=1:3==a.h&&"difficult"==b?c=3:4==a.h&&"easy"==b?c=3:4==a.h&&"difficult"==b?c=5:"easy"==b?c=a.h*a.h*.2:"difficult"==b?c=a.h*a.h*.4:"max"==b&&(c=a.h*a.h);b=a.h;var d=c;console.log("Generating full sudoku...");c=-1*Date.now();var n=L(new I(b));n.result||console.error("Unknown error while solving an empty solution");n=n.L;console.log("Full sudoku generated!");console.log("Removing random cells, while keeping then unique solution...");
for(var f=[],g=0;g<b;++g)for(var h=0;h<b;++h)f.push({x:g,y:h});for(f=T(f);f.length>d;)f.pop();for(g=d=0;0<f.length&&2>g;){var l=f.pop();g=Date.now();h=l.x;l=l.y;var r=n.A(h,l);Q(n,h,l,0);1!=L(n,!0).v?(Q(n,h,l,r),d++):d=0;g=(Date.now()-g)/1E3;console.log("("+f.length+" left, "+d+" fails, "+g+"s)")}console.log("Done!");console.log("Fixating cells...");for(f=0;f<b;++f)for(d=0;d<b;++d)g=n,h=f,l=d,r=N(n,f,d),O(g,h,l)&&(g.a[h][l].fixed=r);c+=Date.now();console.log("Done in "+c/1E3+"s! New game fully generated!");
E(new F(n))}},!1)};G.prototype.w=function(){this.s.innerHTML=""};G.prototype.i=function(){"undefined"===typeof this.R&&(this.R=ea());if("undefined"==typeof this.P||this.width!==this.g.width||this.height!==this.g.height)this.width=this.g.width,this.height=this.g.height,this.P=Trianglify({width:this.width+50,height:this.height+50,cell_size:200,variance:1,x_colors:"YlGnBu",seed:this.R}).canvas();this.j.drawImage(this.P,this.V/this.width*-50,this.W/this.height*-50,this.width+50,this.height+50);K(this)};
G.prototype.X=function(a){this.V=a.clientX;this.W=a.clientY};function Y(a,b,c,d,e){this.x=a;this.y=b;this.fa=a;this.ga=b;this.ba=c;this.ca=d;this.aa=Math.sqrt(Math.pow(a-c,2)+Math.pow(b-d,2));this.T=0;this.f=[];for(this.N=3;this.N--;)this.f.push([this.x,this.y]);this.angle=Math.atan2(d-b,c-a);this.speed=5;this.acceleration=1.05;this.brightness=U(50,70);this.m=e}
Y.prototype.update=function(){this.f.pop();this.f.unshift([this.x,this.y]);this.speed*=this.acceleration;var a=Math.cos(this.angle)*this.speed,b=Math.sin(this.angle)*this.speed;this.T=Math.sqrt(Math.pow(this.fa-(this.x+a),2)+Math.pow(this.ga-(this.y+b),2));this.x+=a;this.y+=b;return this.T<this.aa};Y.prototype.F=function(a){a.beginPath();a.moveTo(this.f[this.f.length-1][0],this.f[this.f.length-1][1]);a.lineTo(this.x,this.y);a.strokeStyle="hsl("+this.m+", 100%, "+this.brightness+"%)";a.stroke()};
function Z(a,b,c){this.x=a;this.y=b;this.angle=U(0,2*Math.PI);this.da=.95;this.ea=.7;this.m=U(c-20,c+20);this.brightness=U(50,80);this.S=U(.005,.015);this.speed=U(1,10);this.f=[];for(this.N=5;this.N--;)this.f.push([this.x,this.y]);this.C=1}Z.prototype.update=function(){this.f.pop();this.f.unshift([this.x,this.y]);this.speed*=this.da;this.x+=Math.cos(this.angle)*this.speed;this.y+=Math.sin(this.angle)*this.speed+this.ea;this.C-=this.S;return this.C>this.S};
Z.prototype.F=function(a){a.beginPath();a.moveTo(this.f[this.f.length-1][0],this.f[this.f.length-1][1]);a.lineTo(this.x,this.y);a.strokeStyle="hsla("+this.m+", 100%, "+this.brightness+"%, "+this.C+")";a.stroke()};function X(){J.call(this);this.l=[];this.u=[];this.M=this.m=120}y(X,J);X.prototype.load=function(){this.s.innerHTML='\n            <div class="winner noselect">\n                Gratul\u00e1lok!\n                <button>\u00daj j\u00e1t\u00e9k</button>\n            </div>\n        '};
X.prototype.w=function(){this.s.innerHTML=""};
X.prototype.i=function(){this.j.fillStyle="#000000";this.j.fillRect(0,0,this.g.width,this.g.height);for(var a=this.l.length-1;0<=a;--a)if(this.l[a].F(this.j),!this.l[a].update()){for(var b=this.l[a].ba,c=this.l[a].ca,d=this.l[a].m,e=80;e--;)this.u.push(new Z(b,c,d));this.l.splice(a,1)}for(a=this.u.length-1;0<=a;--a)this.u[a].F(this.j),this.u[a].update()||this.u.splice(a,1);this.M>=U(20,80)?(this.l.push(new Y(this.g.width/2,this.g.height,U(0,this.g.width),U(0,this.g.height/2),this.m)),this.M=0):this.M++;
this.m=(this.m+1)%180;K(this)};